
<!DOCTYPE html>

<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Managing Projections &#8212; GeoPandas 0.9.0 documentation</title>
    
  <link rel="stylesheet" href="../../_static/css/index.f658d18f9b420779cfdf24aa0a7e2d77.css">

    
  <link rel="stylesheet"
    href="../../_static/vendor/fontawesome/5.13.0/css/all.min.css">
  <link rel="preload" as="font" type="font/woff2" crossorigin
    href="../../_static/vendor/fontawesome/5.13.0/webfonts/fa-solid-900.woff2">
  <link rel="preload" as="font" type="font/woff2" crossorigin
    href="../../_static/vendor/fontawesome/5.13.0/webfonts/fa-brands-400.woff2">

    
      
  <link rel="stylesheet"
    href="../../_static/vendor/open-sans_all/1.44.1/index.css">
  <link rel="stylesheet"
    href="../../_static/vendor/lato_latin-ext/1.44.1/index.css">

    
    <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
    <link rel="stylesheet" href="../../_static/basic.css" type="text/css" />
    <link rel="stylesheet" type="text/css" href="../../_static/custom.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/gallery.css" />
    
  <link rel="preload" as="script" href="../../_static/js/index.d3f166471bb80abb5163.js">

    <script id="documentation_options" data-url_root="../../" src="../../_static/documentation_options.js"></script>
    <script src="../../_static/jquery.js"></script>
    <script src="../../_static/underscore.js"></script>
    <script src="../../_static/doctools.js"></script>
    <script src="../../_static/toggleprompt.js"></script>
    <script crossorigin="anonymous" integrity="sha256-Ae2Vz/4ePdIu6ZyI/5ZGsYnb+m0JlOmKPjt6XZ9JJkA=" src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.4/require.min.js"></script>
    <link rel="shortcut icon" href="../../_static/favicon.png"/>
    <link rel="author" title="About these documents" href="../../about.html" />
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
    <link rel="next" title="Geometric Manipulations" href="geometric_manipulations.html" />
    <link rel="prev" title="Mapping and Plotting Tools" href="mapping.html" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta name="docsearch:language" content="en" />
  </head>
  <body data-spy="scroll" data-target="#bd-toc-nav" data-offset="80">
    
    <nav class="navbar navbar-light navbar-expand-lg bg-light fixed-top bd-navbar" id="navbar-main">
<div class="container-xl">

    <a class="navbar-brand" href="../../index.html">
    
      <img src="../../_static/geopandas_logo_web.svg" class="logo" alt="logo" />
    
    </a>
    <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbar-menu" aria-controls="navbar-menu" aria-expanded="false" aria-label="Toggle navigation">
        <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar-menu" class="col-lg-9 collapse navbar-collapse">
      <ul id="navbar-main-elements" class="navbar-nav mr-auto">
        
        
        <li class="nav-item ">
            <a class="nav-link" href="../../index.html">Home</a>
        </li>
        
        <li class="nav-item ">
            <a class="nav-link" href="../../about.html">About</a>
        </li>
        
        <li class="nav-item ">
            <a class="nav-link" href="../../getting_started.html">Getting started</a>
        </li>
        
        <li class="nav-item active">
            <a class="nav-link" href="../../docs.html">Documentation</a>
        </li>
        
        <li class="nav-item ">
            <a class="nav-link" href="../../community.html">Community</a>
        </li>
        
        
      </ul>


      

      <ul class="navbar-nav">
        
          <li class="nav-item">
            <a class="nav-link" href="https://github.com/geopandas/geopandas" target="_blank" rel="noopener">
              <span><i class="fab fa-github-square"></i></span>
            </a>
          </li>
        
        
          <li class="nav-item">
            <a class="nav-link" href="https://twitter.com/geopandas" target="_blank" rel="noopener">
              <span><i class="fab fa-twitter-square"></i></span>
            </a>
          </li>
        
      </ul>
    </div>
</div>
    </nav>
    

    <div class="container-xl">
      <div class="row">
          
          <div class="col-12 col-md-3 bd-sidebar"><form class="bd-search d-flex align-items-center" action="../../search.html" method="get">
  <i class="icon fas fa-search"></i>
  <input type="search" class="form-control" name="q" id="search-input" placeholder="Search the docs ..." aria-label="Search the docs ..." autocomplete="off" >
</form>
<nav class="bd-links" id="bd-docs-nav" aria-label="Main navigation">

    <div class="bd-toc-item active">
    
  
    <ul class="nav bd-sidenav">
        
        
        
        
        
        
        
        
          
            
  
                <li class="active">
                    <a href="../user_guide.html">User Guide</a>
                    <ul>
                    
                        <li class="">
                            <a href="data_structures.html">Data Structures</a>
                        </li>
                    
                        <li class="">
                            <a href="io.html">Reading and Writing Files</a>
                        </li>
                    
                        <li class="">
                            <a href="indexing.html">Indexing and Selecting Data</a>
                        </li>
                    
                        <li class="">
                            <a href="mapping.html">Making Maps and plots</a>
                        </li>
                    
                        <li class="active">
                            <a href="">Managing Projections</a>
                        </li>
                    
                        <li class="">
                            <a href="geometric_manipulations.html">Geometric Manipulations</a>
                        </li>
                    
                        <li class="">
                            <a href="set_operations.html">Set Operations with overlay</a>
                        </li>
                    
                        <li class="">
                            <a href="aggregation_with_dissolve.html">Aggregation with dissolve</a>
                        </li>
                    
                        <li class="">
                            <a href="mergingdata.html">Merging Data</a>
                        </li>
                    
                        <li class="">
                            <a href="geocoding.html">Geocoding</a>
                        </li>
                    
                    </ul>
                </li>
            
          
            
                <li class="">
                    <a href="../advanced_guide.html">Advanced Guide</a>
                </li>
            
          
            
                <li class="">
                    <a href="../reference.html">API reference</a>
                </li>
            
          
            
                <li class="">
                    <a href="../changelog.html">Changelog</a>
                </li>
            
          
        
        
        
        
      </ul>
  
  </nav>
          </div>
          

          
          <div class="d-none d-xl-block col-xl-2 bd-toc">
              
<div class="tocsection onthispage pt-5 pb-3">
    <i class="fas fa-list"></i> On this page
</div>

<nav id="bd-toc-nav">
    <ul class="nav section-nav flex-column">
    
        <li class="nav-item toc-entry toc-h2">
            <a href="#coordinate-reference-systems" class="nav-link">Coordinate Reference Systems</a>
        </li>
    
        <li class="nav-item toc-entry toc-h2">
            <a href="#what-is-the-best-format-to-store-the-crs-information" class="nav-link">What is the best format to store the CRS information?</a>
        </li>
    
        <li class="nav-item toc-entry toc-h2">
            <a href="#setting-a-projection" class="nav-link">Setting a Projection</a>
        </li>
    
        <li class="nav-item toc-entry toc-h2">
            <a href="#re-projecting" class="nav-link">Re-Projecting</a>
        </li>
    
        <li class="nav-item toc-entry toc-h2">
            <a href="#projection-for-multiple-geometry-columns" class="nav-link">Projection for multiple geometry columns</a>
        </li>
    
        <li class="nav-item toc-entry toc-h2">
            <a href="#upgrading-to-geopandas-0-7-with-pyproj-2-2-and-proj-6" class="nav-link">Upgrading to GeoPandas 0.7 with pyproj > 2.2 and PROJ > 6</a><ul class="nav section-nav flex-column">
                
        <li class="nav-item toc-entry toc-h3">
            <a href="#importing-data-from-files" class="nav-link">Importing data from files</a>
        </li>
    
        <li class="nav-item toc-entry toc-h3">
            <a href="#manually-specifying-the-crs" class="nav-link">Manually specifying the CRS</a>
        </li>
    
        <li class="nav-item toc-entry toc-h3">
            <a href="#the-axis-order-of-a-crs" class="nav-link">The axis order of a CRS</a>
        </li>
    
        <li class="nav-item toc-entry toc-h3">
            <a href="#why-is-it-not-properly-recognizing-my-crs" class="nav-link">Why is it not properly recognizing my CRS?</a><ul class="nav section-nav flex-column">
                
        <li class="nav-item toc-entry toc-h4">
            <a href="#i-get-a-bound-crs" class="nav-link">I get a “Bound CRS”?</a>
        </li>
    
        <li class="nav-item toc-entry toc-h4">
            <a href="#i-have-a-different-axis-order" class="nav-link">I have a different axis order?</a>
        </li>
    
            </ul>
        </li>
    
        <li class="nav-item toc-entry toc-h3">
            <a href="#the-crs-attribute-is-no-longer-a-dict-or-string" class="nav-link">The .crs attribute is no longer a dict or string</a>
        </li>
    
            </ul>
        </li>
    
    </ul>
</nav>


              
          </div>
          

          
          <main class="col-12 col-md-9 col-xl-7 py-md-5 pl-md-5 pr-md-4 bd-content" role="main">
              
              <div>
                
  <div class="section" id="managing-projections">
<h1>Managing Projections<a class="headerlink" href="#managing-projections" title="Permalink to this headline">¶</a></h1>
<div class="section" id="coordinate-reference-systems">
<h2>Coordinate Reference Systems<a class="headerlink" href="#coordinate-reference-systems" title="Permalink to this headline">¶</a></h2>
<p>The Coordinate Reference System (CRS) is important because the geometric shapes
in a GeoSeries or GeoDataFrame object are simply a collection of coordinates in
an arbitrary space. A CRS tells Python how those coordinates relate to places on
the Earth.</p>
<p>You can find the codes for most commonly used projections from
<a class="reference external" href="https://spatialreference.org/">www.spatialreference.org</a>.</p>
<p>The same CRS can often be referred to in many ways. For example, one of the most
commonly used CRS is the WGS84 latitude-longitude projection. This can be
referred to using the authority code <code class="docutils literal notranslate"><span class="pre">&quot;EPSG:4326&quot;</span></code>.</p>
<p><em>geopandas</em> can accept anything accepted by <a class="reference external" href="https://pyproj4.github.io/pyproj/stable/api/crs/crs.html#pyproj.crs.CRS.from_user_input" title="(in pyproj v3.0.0)"><code class="xref py py-meth docutils literal notranslate"><span class="pre">pyproj.CRS.from_user_input()</span></code></a>:</p>
<ul class="simple">
<li><p>CRS WKT string</p></li>
<li><p>An authority string (i.e. “epsg:4326”)</p></li>
<li><p>An EPSG integer code (i.e. 4326)</p></li>
<li><p>A <code class="docutils literal notranslate"><span class="pre">pyproj.CRS</span></code></p></li>
<li><p>An object with a to_wkt method.</p></li>
<li><p>PROJ string</p></li>
<li><p>Dictionary of PROJ parameters</p></li>
<li><p>PROJ keyword arguments for parameters</p></li>
<li><p>JSON string with PROJ parameters</p></li>
</ul>
<p>For reference, a few very common projections and their EPSG codes:</p>
<ul class="simple">
<li><p>WGS84 Latitude/Longitude: <code class="docutils literal notranslate"><span class="pre">&quot;EPSG:4326&quot;</span></code></p></li>
<li><p>UTM Zones (North): <code class="docutils literal notranslate"><span class="pre">&quot;EPSG:32633&quot;</span></code></p></li>
<li><p>UTM Zones (South): <code class="docutils literal notranslate"><span class="pre">&quot;EPSG:32733&quot;</span></code></p></li>
</ul>
</div>
<div class="section" id="what-is-the-best-format-to-store-the-crs-information">
<h2>What is the best format to store the CRS information?<a class="headerlink" href="#what-is-the-best-format-to-store-the-crs-information" title="Permalink to this headline">¶</a></h2>
<p>Generally, WKT or SRID’s are preferred over PROJ strings as they can contain more information about a given CRS.
Conversions between WKT and PROJ strings will in most cases cause a loss of information, potentially leading to erroneous transformations. If possible WKT2 should be used.</p>
<p>For more details, see <a class="reference external" href="https://proj.org/faq.html#what-is-the-best-format-for-describing-coordinate-reference-systems">https://proj.org/faq.html#what-is-the-best-format-for-describing-coordinate-reference-systems</a></p>
</div>
<div class="section" id="setting-a-projection">
<h2>Setting a Projection<a class="headerlink" href="#setting-a-projection" title="Permalink to this headline">¶</a></h2>
<p>There are two relevant operations for projections: setting a projection and re-projecting.</p>
<p>Setting a projection may be necessary when for some reason <em>geopandas</em> has coordinate data (x-y values), but no information about how those coordinates refer to locations in the real world. Setting a projection is how one tells <em>geopandas</em> how to interpret coordinates. If no CRS is set, <em>geopandas</em> geometry operations will still work, but coordinate transformations will not be possible and exported files may not be interpreted correctly by other software.</p>
<p>Be aware that <strong>most of the time</strong> you don’t have to set a projection. Data loaded from a reputable source (using the <a class="reference internal" href="../reference/api/geopandas.read_file.html#geopandas.read_file" title="geopandas.read_file"><code class="xref py py-func docutils literal notranslate"><span class="pre">geopandas.read_file()</span></code></a> command) <em>should</em> always include projection information. You can see an objects current CRS through the <a class="reference internal" href="../reference/api/geopandas.GeoSeries.crs.html#geopandas.GeoSeries.crs" title="geopandas.GeoSeries.crs"><code class="xref py py-attr docutils literal notranslate"><span class="pre">GeoSeries.crs</span></code></a> attribute.</p>
<p>From time to time, however, you may get data that does not include a projection. In this situation, you have to set the CRS so <em>geopandas</em> knows how to interpret the coordinates.</p>
<p>For example, if you convert a spreadsheet of latitudes and longitudes into a
GeoSeries by hand, you would set the projection by passing the WGS84
latitude-longitude CRS to the <a class="reference internal" href="../reference/api/geopandas.GeoSeries.set_crs.html#geopandas.GeoSeries.set_crs" title="geopandas.GeoSeries.set_crs"><code class="xref py py-meth docutils literal notranslate"><span class="pre">GeoSeries.set_crs()</span></code></a> method (or by setting
the <a class="reference internal" href="../reference/api/geopandas.GeoSeries.crs.html#geopandas.GeoSeries.crs" title="geopandas.GeoSeries.crs"><code class="xref py py-attr docutils literal notranslate"><span class="pre">GeoSeries.crs</span></code></a> attribute):</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">my_geoseries</span> <span class="o">=</span> <span class="n">my_geoseries</span><span class="o">.</span><span class="n">set_crs</span><span class="p">(</span><span class="s2">&quot;EPSG:4326&quot;</span><span class="p">)</span>
<span class="n">my_geoseries</span> <span class="o">=</span> <span class="n">my_geoseries</span><span class="o">.</span><span class="n">set_crs</span><span class="p">(</span><span class="n">epsg</span><span class="o">=</span><span class="mi">4326</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="section" id="re-projecting">
<h2>Re-Projecting<a class="headerlink" href="#re-projecting" title="Permalink to this headline">¶</a></h2>
<p>Re-projecting is the process of changing the representation of locations from one coordinate system to another. All projections of locations on the Earth into a two-dimensional plane <a class="reference external" href="https://en.wikipedia.org/wiki/Map_projection#Which_projection_is_best.3F">are distortions</a>, the projection that is best for your application may be different from the projection associated with the data you import. In these cases, data can be re-projected using the <a class="reference internal" href="../reference/api/geopandas.GeoDataFrame.to_crs.html#geopandas.GeoDataFrame.to_crs" title="geopandas.GeoDataFrame.to_crs"><code class="xref py py-meth docutils literal notranslate"><span class="pre">GeoDataFrame.to_crs()</span></code></a> command:</p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="go"># load example data</span>
<span class="gp">In [1]: </span><span class="n">world</span> <span class="o">=</span> <span class="n">geopandas</span><span class="o">.</span><span class="n">read_file</span><span class="p">(</span><span class="n">geopandas</span><span class="o">.</span><span class="n">datasets</span><span class="o">.</span><span class="n">get_path</span><span class="p">(</span><span class="s1">&#39;naturalearth_lowres&#39;</span><span class="p">))</span>

<span class="go"># Check original projection</span>
<span class="go"># (it&#39;s Platte Carre! x-y are long and lat)</span>
<span class="gp">In [2]: </span><span class="n">world</span><span class="o">.</span><span class="n">crs</span>
<span class="gh">Out[2]: </span><span class="go"></span>
<span class="go">&lt;Geographic 2D CRS: EPSG:4326&gt;</span>
<span class="go">Name: WGS 84</span>
<span class="go">Axis Info [ellipsoidal]:</span>
<span class="go">- Lat[north]: Geodetic latitude (degree)</span>
<span class="go">- Lon[east]: Geodetic longitude (degree)</span>
<span class="go">Area of Use:</span>
<span class="go">- name: World.</span>
<span class="go">- bounds: (-180.0, -90.0, 180.0, 90.0)</span>
<span class="go">Datum: World Geodetic System 1984</span>
<span class="go">- Ellipsoid: WGS 84</span>
<span class="go">- Prime Meridian: Greenwich</span>

<span class="go"># Visualize</span>
<span class="gp">In [3]: </span><span class="n">ax</span> <span class="o">=</span> <span class="n">world</span><span class="o">.</span><span class="n">plot</span><span class="p">()</span>

<span class="gp">In [4]: </span><span class="n">ax</span><span class="o">.</span><span class="n">set_title</span><span class="p">(</span><span class="s2">&quot;WGS84 (lat/lon)&quot;</span><span class="p">);</span>

<span class="go"># Reproject to Mercator (after dropping Antartica)</span>
<span class="gp">In [5]: </span><span class="n">world</span> <span class="o">=</span> <span class="n">world</span><span class="p">[(</span><span class="n">world</span><span class="o">.</span><span class="n">name</span> <span class="o">!=</span> <span class="s2">&quot;Antarctica&quot;</span><span class="p">)</span> <span class="o">&amp;</span> <span class="p">(</span><span class="n">world</span><span class="o">.</span><span class="n">name</span> <span class="o">!=</span> <span class="s2">&quot;Fr. S. Antarctic Lands&quot;</span><span class="p">)]</span>

<span class="gp">In [6]: </span><span class="n">world</span> <span class="o">=</span> <span class="n">world</span><span class="o">.</span><span class="n">to_crs</span><span class="p">(</span><span class="s2">&quot;EPSG:3395&quot;</span><span class="p">)</span> <span class="c1"># world.to_crs(epsg=3395) would also work</span>

<span class="gp">In [7]: </span><span class="n">ax</span> <span class="o">=</span> <span class="n">world</span><span class="o">.</span><span class="n">plot</span><span class="p">()</span>

<span class="gp">In [8]: </span><span class="n">ax</span><span class="o">.</span><span class="n">set_title</span><span class="p">(</span><span class="s2">&quot;Mercator&quot;</span><span class="p">);</span>
</pre></div>
</div>
<img alt="../../_images/world_starting.png" src="../../_images/world_starting.png" />
<img alt="../../_images/world_reproj.png" src="../../_images/world_reproj.png" />
</div>
<div class="section" id="projection-for-multiple-geometry-columns">
<h2>Projection for multiple geometry columns<a class="headerlink" href="#projection-for-multiple-geometry-columns" title="Permalink to this headline">¶</a></h2>
<p>GeoPandas 0.8 implements support for different projections assigned to different geometry
columns of the same GeoDataFrame. The projection is now stored together with geometries per column (directly
on the GeometryArray level).</p>
<p>Note that if GeometryArray has assigned projection, it is preferred over the
projection passed to GeoSeries or GeoDataFrame during the creation:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">array</span><span class="o">.</span><span class="n">crs</span>
<span class="go">&lt;Geographic 2D CRS: EPSG:4326&gt;</span>
<span class="go">Name: WGS 84</span>
<span class="go">Axis Info [ellipsoidal]:</span>
<span class="go">- Lat[north]: Geodetic latitude (degree)</span>
<span class="go">- Lon[east]: Geodetic longitude (degree)</span>
<span class="gp">...</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">GeoSeries</span><span class="p">(</span><span class="n">array</span><span class="p">,</span> <span class="n">crs</span><span class="o">=</span><span class="mi">3395</span><span class="p">)</span><span class="o">.</span><span class="n">crs</span>  <span class="c1"># crs=3395 is ignored as array already has CRS</span>
<span class="go">FutureWarning: CRS mismatch between CRS of the passed geometries and &#39;crs&#39;. Use &#39;GeoDataFrame.set_crs(crs, allow_override=True)&#39; to overwrite CRS or &#39;GeoDataFrame.to_crs(crs)&#39; to reproject geometries. CRS mismatch will raise an error in the future versions of GeoPandas.</span>
<span class="go">    GeoSeries(array, crs=3395).crs</span>

<span class="go">&lt;Geographic 2D CRS: EPSG:4326&gt;</span>
<span class="go">Name: WGS 84</span>
<span class="go">Axis Info [ellipsoidal]:</span>
<span class="go">- Lat[north]: Geodetic latitude (degree)</span>
<span class="go">- Lon[east]: Geodetic longitude (degree)</span>
<span class="gp">...</span>
</pre></div>
</div>
<p>If you want to overwrite projection, you can then assign it to the GeoSeries
manually or re-project geometries to the target projection using either
<code class="docutils literal notranslate"><span class="pre">GeoSeries.set_crs(epsg=3395,</span> <span class="pre">allow_override=True)</span></code> or
<code class="docutils literal notranslate"><span class="pre">GeoSeries.to_crs(epsg=3395)</span></code>.</p>
<p>All GeometryArray-based operations preserve projection; however, if you loop over a column
containing geometry, this information might be lost.</p>
</div>
<div class="section" id="upgrading-to-geopandas-0-7-with-pyproj-2-2-and-proj-6">
<h2>Upgrading to GeoPandas 0.7 with pyproj &gt; 2.2 and PROJ &gt; 6<a class="headerlink" href="#upgrading-to-geopandas-0-7-with-pyproj-2-2-and-proj-6" title="Permalink to this headline">¶</a></h2>
<p>Starting with GeoPandas 0.7, the <cite>.crs</cite> attribute of a GeoSeries or GeoDataFrame
stores the CRS information as a <code class="docutils literal notranslate"><span class="pre">pyproj.CRS</span></code>, and no longer as a proj4 string
or dict.</p>
<p>Before, you might have seen this:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">gdf</span><span class="o">.</span><span class="n">crs</span>
<span class="go">{&#39;init&#39;: &#39;epsg:4326&#39;}</span>
</pre></div>
</div>
<p>while now you will see something like this:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">gdf</span><span class="o">.</span><span class="n">crs</span>
<span class="go">&lt;Geographic 2D CRS: EPSG:4326&gt;</span>
<span class="go">Name: WGS 84</span>
<span class="go">Axis Info [ellipsoidal]:</span>
<span class="go">- Lat[north]: Geodetic latitude (degree)</span>
<span class="go">- Lon[east]: Geodetic longitude (degree)</span>
<span class="gp">...</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">type</span><span class="p">(</span><span class="n">gdf</span><span class="o">.</span><span class="n">crs</span><span class="p">)</span>
<span class="go">pyproj.crs.CRS</span>
</pre></div>
</div>
<p>This gives a better user interface and integrates improvements from pyproj and
PROJ 6, but might also require some changes in your code. See <a class="reference external" href="https://jorisvandenbossche.github.io/blog/2020/02/11/geopandas-pyproj-crs/">this blogpost</a>
for some more background, and the subsections below cover different possible
migration issues.</p>
<p>See the <a class="reference external" href="https://pyproj4.github.io/pyproj/stable/">pyproj docs</a> for more on
the <code class="docutils literal notranslate"><span class="pre">pyproj.CRS</span></code> object.</p>
<div class="section" id="importing-data-from-files">
<h3>Importing data from files<a class="headerlink" href="#importing-data-from-files" title="Permalink to this headline">¶</a></h3>
<p>When reading geospatial files with <a class="reference internal" href="../reference/api/geopandas.read_file.html#geopandas.read_file" title="geopandas.read_file"><code class="xref py py-func docutils literal notranslate"><span class="pre">geopandas.read_file()</span></code></a>, things should
mostly work out of the box. For example, reading the example countries dataset
yields a proper CRS:</p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [9]: </span><span class="n">df</span> <span class="o">=</span> <span class="n">geopandas</span><span class="o">.</span><span class="n">read_file</span><span class="p">(</span><span class="n">geopandas</span><span class="o">.</span><span class="n">datasets</span><span class="o">.</span><span class="n">get_path</span><span class="p">(</span><span class="s1">&#39;naturalearth_lowres&#39;</span><span class="p">))</span>

<span class="gp">In [10]: </span><span class="n">df</span><span class="o">.</span><span class="n">crs</span>
<span class="gh">Out[10]: </span><span class="go"></span>
<span class="go">&lt;Geographic 2D CRS: EPSG:4326&gt;</span>
<span class="go">Name: WGS 84</span>
<span class="go">Axis Info [ellipsoidal]:</span>
<span class="go">- Lat[north]: Geodetic latitude (degree)</span>
<span class="go">- Lon[east]: Geodetic longitude (degree)</span>
<span class="go">Area of Use:</span>
<span class="go">- name: World.</span>
<span class="go">- bounds: (-180.0, -90.0, 180.0, 90.0)</span>
<span class="go">Datum: World Geodetic System 1984</span>
<span class="go">- Ellipsoid: WGS 84</span>
<span class="go">- Prime Meridian: Greenwich</span>
</pre></div>
</div>
<p>However, in certain cases (with older CRS formats), the resulting CRS object
might not be fully as expected. See the <a class="reference internal" href="#unrecognized-crs-reasons"><span class="std std-ref">section below</span></a>
for possible reasons and how to solve it.</p>
</div>
<div class="section" id="manually-specifying-the-crs">
<h3>Manually specifying the CRS<a class="headerlink" href="#manually-specifying-the-crs" title="Permalink to this headline">¶</a></h3>
<p>When specifying the CRS manually in your code (e.g., because your data has not
yet a CRS, or when converting to another CRS), this might require a change in
your code.</p>
<p><strong>“init” proj4 strings/dicts</strong></p>
<p>Currently, a lot of people (and also the GeoPandas docs showed that before)
specify the EPSG code using the “init” proj4 string:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1">## OLD</span>
<span class="n">GeoDataFrame</span><span class="p">(</span><span class="o">...</span><span class="p">,</span> <span class="n">crs</span><span class="o">=</span><span class="p">{</span><span class="s1">&#39;init&#39;</span><span class="p">:</span> <span class="s1">&#39;epsg:4326&#39;</span><span class="p">})</span>
<span class="c1"># or</span>
<span class="n">gdf</span><span class="o">.</span><span class="n">crs</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;init&#39;</span><span class="p">:</span> <span class="s1">&#39;epsg:4326&#39;</span><span class="p">}</span>
<span class="c1"># or</span>
<span class="n">gdf</span><span class="o">.</span><span class="n">to_crs</span><span class="p">({</span><span class="s1">&#39;init&#39;</span><span class="p">:</span> <span class="s1">&#39;epsg:4326&#39;</span><span class="p">})</span>
</pre></div>
</div>
<p>The above will now raise a deprecation warning from pyproj, and instead of the
“init” proj4 string, you should use only the EPSG code itself as follows:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1">## NEW</span>
<span class="n">GeoDataFrame</span><span class="p">(</span><span class="o">...</span><span class="p">,</span> <span class="n">crs</span><span class="o">=</span><span class="s2">&quot;EPSG:4326&quot;</span><span class="p">)</span>
<span class="c1"># or</span>
<span class="n">gdf</span><span class="o">.</span><span class="n">crs</span> <span class="o">=</span> <span class="s2">&quot;EPSG:4326&quot;</span>
<span class="c1"># or</span>
<span class="n">gdf</span><span class="o">.</span><span class="n">to_crs</span><span class="p">(</span><span class="s2">&quot;EPSG:4326&quot;</span><span class="p">)</span>
</pre></div>
</div>
<p><strong>proj4 strings/dicts</strong></p>
<p>Although a full proj4 string is not deprecated (as opposed to the “init” string
above), it is still recommended to change it with an EPSG code if possible.</p>
<p>For example, instead of:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">gdf</span><span class="o">.</span><span class="n">crs</span> <span class="o">=</span> <span class="s2">&quot;+proj=laea +lat_0=45 +lon_0=-100 +x_0=0 +y_0=0 +a=6370997 +b=6370997 +units=m +no_defs&quot;</span>
</pre></div>
</div>
<p>we recommend to do:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">gdf</span><span class="o">.</span><span class="n">crs</span> <span class="o">=</span> <span class="s2">&quot;EPSG:2163&quot;</span>
</pre></div>
</div>
<p><em>if</em> you know the EPSG code for the projection you are using.</p>
<p>One possible way to find out the EPSG code is using pyproj for this:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">pyproj</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">crs</span> <span class="o">=</span> <span class="n">pyproj</span><span class="o">.</span><span class="n">CRS</span><span class="p">(</span><span class="s2">&quot;+proj=laea +lat_0=45 +lon_0=-100 +x_0=0 +y_0=0 +a=6370997 +b=6370997 +units=m +no_defs&quot;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">crs</span><span class="o">.</span><span class="n">to_epsg</span><span class="p">()</span>
<span class="go">2163</span>
</pre></div>
</div>
<p>(you might need to set the <code class="docutils literal notranslate"><span class="pre">min_confidence</span></code> keyword of <code class="docutils literal notranslate"><span class="pre">to_epsg</span></code> to a lower
value if the match is not perfect)</p>
<p>Further, on websites such as <a class="reference external" href="https://spatialreference.org/">spatialreference.org</a>
and <a class="reference external" href="https://epsg.io/">epsg.io</a> the descriptions of many CRS can be found
including their EPSG codes and proj4 string definitions.</p>
<p><strong>Other formats</strong></p>
<p>Next to the EPSG code mentioned above, there are also other ways to specify the
CRS: an actual <code class="docutils literal notranslate"><span class="pre">pyproj.CRS</span></code> object, a WKT string, a PROJ JSON string, etc.
Anything that is accepted by <code class="docutils literal notranslate"><span class="pre">pyproj.CRS.from_user_input</span></code> can by specified
to the <code class="docutils literal notranslate"><span class="pre">crs</span></code> keyword/attribute in GeoPandas.</p>
<p>Also compatible CRS objects, such as from the <code class="docutils literal notranslate"><span class="pre">rasterio</span></code> package, can be
passed directly to GeoPandas.</p>
</div>
<div class="section" id="the-axis-order-of-a-crs">
<h3>The axis order of a CRS<a class="headerlink" href="#the-axis-order-of-a-crs" title="Permalink to this headline">¶</a></h3>
<p>Starting with PROJ 6 / pyproj 2, the axis order of the official EPSG definition
is honoured. For example, when using geographic coordinates (degrees of longitude
and latitude) in the standard EPSG:4326, the CRS will look like:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">pyproj</span><span class="o">.</span><span class="n">CRS</span><span class="p">(</span><span class="mi">3</span><span class="n">EPSG</span><span class="p">:</span><span class="mi">4326</span><span class="s2">&quot;)</span>
<span class="go">&lt;Geographic 2D CRS: EPSG:4326&gt;</span>
<span class="gp">...</span>
<span class="go">Axis Info [ellipsoidal]:</span>
<span class="go">- Lat[north]: Geodetic latitude (degree)</span>
<span class="go">- Lon[east]: Geodetic longitude (degree)</span>
<span class="gp">...</span>
</pre></div>
</div>
<p>This mentions the order as (lat, lon), as that is the official order of coordinates
in EPSG:4326. In GeoPandas, however, the coordinates are always stored as (x, y),
and thus as (lon, lat) order, regardless of the CRS (i.e. the “traditional” order used
in GIS). When reprojecting, GeoPandas and pyproj will under the hood take care of
this difference in axis order, so the user doesn’t need to care about this.</p>
</div>
<div class="section" id="why-is-it-not-properly-recognizing-my-crs">
<span id="unrecognized-crs-reasons"></span><h3>Why is it not properly recognizing my CRS?<a class="headerlink" href="#why-is-it-not-properly-recognizing-my-crs" title="Permalink to this headline">¶</a></h3>
<p>There are many file sources and CRS definitions out there “in the wild” that
might have a CRS description that does not fully conform to the new standards of
PROJ &gt; 6 (proj4 strings, older WKT formats, …). In such cases, you will get a
<code class="docutils literal notranslate"><span class="pre">pyproj.CRS</span></code> object that might not be fully what you expected (e.g. not equal
to the expected EPSG code). Below we list a few possible cases.</p>
<div class="section" id="i-get-a-bound-crs">
<h4>I get a “Bound CRS”?<a class="headerlink" href="#i-get-a-bound-crs" title="Permalink to this headline">¶</a></h4>
<p>Some CRS definitions include a <em>“towgs84” clause</em>, which can give problems in
recognizing the actual CRS.</p>
<p>For example, both the proj4 and WKT representation for EPSG:31370 (the local
projection used in Belgium) as can be found at <a class="reference external" href="https://spatialreference.org/ref/epsg/31370/">https://spatialreference.org/ref/epsg/31370/</a>
include this. When taking one of those definitions from that site, and creating
a CRS object:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">pyproj</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">crs</span> <span class="o">=</span> <span class="n">pyproj</span><span class="o">.</span><span class="n">CRS</span><span class="p">(</span><span class="s2">&quot;+proj=lcc +lat_1=51.16666723333333 +lat_2=49.8333339 +lat_0=90 +lon_0=4.367486666666666 +x_0=150000.013 +y_0=5400088.438 +ellps=intl +towgs84=106.869,-52.2978,103.724,-0.33657,0.456955,-1.84218,1 +units=m +no_defs&quot;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">crs</span>
<span class="go">&lt;Bound CRS: +proj=lcc +lat_1=51.16666723333333 +lat_2=49.83333 ...&gt;</span>
<span class="go">Name: unknown</span>
<span class="go">Axis Info [cartesian]:</span>
<span class="go">- E[east]: Easting (metre)</span>
<span class="go">- N[north]: Northing (metre)</span>
<span class="go">Area of Use:</span>
<span class="go">- undefined</span>
<span class="go">Coordinate Operation:</span>
<span class="go">- name: Transformation from unknown to WGS84</span>
<span class="go">- method: Position Vector transformation (geog2D domain)</span>
<span class="go">Datum: Unknown based on International 1909 (Hayford) ellipsoid</span>
<span class="go">- Ellipsoid: International 1909 (Hayford)</span>
<span class="go">- Prime Meridian: Greenwich</span>
<span class="go">Source CRS: unknown</span>
</pre></div>
</div>
<p>You notice that the above is a not a “Projected CRS” as expected, but a “Bound CRS”.
This is because it is “bound” to a conversion to WGS84, and will always use this
when reprojecting instead of letting PROJ determine the best conversion.</p>
<p>To get the actual underlying projected CRS, you can use the <code class="docutils literal notranslate"><span class="pre">.source_crs</span></code> attribute:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">crs</span><span class="o">.</span><span class="n">source_crs</span>
<span class="go">&lt;Projected CRS: PROJCRS[&quot;unknown&quot;,BASEGEOGCRS[&quot;unknown&quot;,DATUM[&quot;Unk ...&gt;</span>
<span class="go">Name: unknown</span>
<span class="gp">...</span>
</pre></div>
</div>
<p>Now we have a “Projected CRS”, and now it will also recognize the correct EPSG
number:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">crs</span><span class="o">.</span><span class="n">to_epsg</span><span class="p">()</span>

<span class="gp">&gt;&gt;&gt; </span><span class="n">crs</span><span class="o">.</span><span class="n">source_crs</span><span class="o">.</span><span class="n">to_epsg</span><span class="p">()</span>
<span class="go">31370</span>
</pre></div>
</div>
</div>
<div class="section" id="i-have-a-different-axis-order">
<h4>I have a different axis order?<a class="headerlink" href="#i-have-a-different-axis-order" title="Permalink to this headline">¶</a></h4>
<p>As mentioned above, pyproj now honours the axis order of the EPSG definition.
However, proj4 strings or older WKT versions don’t specify this correctly, which
can be a reason that the CRS object is not equal to the expected EPSG code.</p>
<p>Consider the following example of a Canadian projected CRS “EPSG:2953”. When
constructing the CRS object from the WKT string as provided on
<a class="reference external" href="https://epsg.io/2953">https://epsg.io/2953</a>:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">crs</span> <span class="o">=</span> <span class="n">pyproj</span><span class="o">.</span><span class="n">CRS</span><span class="p">(</span><span class="s2">&quot;&quot;&quot;PROJCS[&quot;NAD83(CSRS) / New Brunswick Stereographic&quot;,</span>
<span class="gp">... </span><span class="s2">    GEOGCS[&quot;NAD83(CSRS)&quot;,</span>
<span class="gp">... </span><span class="s2">        DATUM[&quot;NAD83_Canadian_Spatial_Reference_System&quot;,</span>
<span class="gp">... </span><span class="s2">            SPHEROID[&quot;GRS 1980&quot;,6378137,298.257222101,</span>
<span class="gp">... </span><span class="s2">                AUTHORITY[&quot;EPSG&quot;,&quot;7019&quot;]],</span>
<span class="gp">... </span><span class="s2">            AUTHORITY[&quot;EPSG&quot;,&quot;6140&quot;]],</span>
<span class="gp">... </span><span class="s2">        PRIMEM[&quot;Greenwich&quot;,0,</span>
<span class="gp">... </span><span class="s2">            AUTHORITY[&quot;EPSG&quot;,&quot;8901&quot;]],</span>
<span class="gp">... </span><span class="s2">        UNIT[&quot;degree&quot;,0.0174532925199433,</span>
<span class="gp">... </span><span class="s2">            AUTHORITY[&quot;EPSG&quot;,&quot;9122&quot;]],</span>
<span class="gp">... </span><span class="s2">        AUTHORITY[&quot;EPSG&quot;,&quot;4617&quot;]],</span>
<span class="gp">... </span><span class="s2">    PROJECTION[&quot;Oblique_Stereographic&quot;],</span>
<span class="gp">... </span><span class="s2">    PARAMETER[&quot;latitude_of_origin&quot;,46.5],</span>
<span class="gp">... </span><span class="s2">    PARAMETER[&quot;central_meridian&quot;,-66.5],</span>
<span class="gp">... </span><span class="s2">    PARAMETER[&quot;scale_factor&quot;,0.999912],</span>
<span class="gp">... </span><span class="s2">    PARAMETER[&quot;false_easting&quot;,2500000],</span>
<span class="gp">... </span><span class="s2">    PARAMETER[&quot;false_northing&quot;,7500000],</span>
<span class="gp">... </span><span class="s2">    UNIT[&quot;metre&quot;,1,</span>
<span class="gp">... </span><span class="s2">        AUTHORITY[&quot;EPSG&quot;,&quot;9001&quot;]],</span>
<span class="gp">... </span><span class="s2">    AUTHORITY[&quot;EPSG&quot;,&quot;2953&quot;]]&quot;&quot;&quot;</span><span class="p">)</span>

<span class="gp">&gt;&gt;&gt; </span><span class="n">crs</span>
<span class="go">&lt;Projected CRS: PROJCS[&quot;NAD83(CSRS) / New Brunswick Stereographic&quot; ...&gt;</span>
<span class="go">Name: NAD83(CSRS) / New Brunswick Stereographic</span>
<span class="go">Axis Info [cartesian]:</span>
<span class="go">- E[east]: Easting (metre)</span>
<span class="go">- N[north]: Northing (metre)</span>
<span class="gp">...</span>
</pre></div>
</div>
<p>Although this is the WKT string as found online for “EPSG:2953”, this CRS object
does not evaluate equal to this EPSG code:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">crs</span> <span class="o">==</span> <span class="s2">&quot;EPSG:2953&quot;</span>
<span class="go">False</span>
</pre></div>
</div>
<p>If we construct the CRS object from the EPSG code (truncated output):</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">pyproj</span><span class="o">.</span><span class="n">CRS</span><span class="p">(</span><span class="s2">&quot;EPSG:2953&quot;</span><span class="p">)</span>
<span class="go">&lt;Projected CRS: EPSG:2953&gt;</span>
<span class="go">Name: NAD83(CSRS) / New Brunswick Stereographic</span>
<span class="go">Axis Info [cartesian]:</span>
<span class="go">- N[north]: Northing (metre)</span>
<span class="go">- E[east]: Easting (metre)</span>
<span class="gp">...</span>
</pre></div>
</div>
<p>You can see that the CRS object constructed from the WKT string has a “Easting,
Northing” (i.e. x, y) axis order, while the CRS object constructed from the EPSG
code has a (Northing, Easting) axis order.</p>
<p>Only having this difference in axis order is no problem when using the CRS in
GeoPandas, since GeoPandas always uses a (x, y) order to store the data
regardless of the CRS definition. But, you might still want to verify it is
equivalent to the expected EPSG code. By lowering the <cite>min_confidence</cite>, the axis
order will be ignored:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">crs</span><span class="o">.</span><span class="n">to_epsg</span><span class="p">()</span>

<span class="gp">&gt;&gt;&gt; </span><span class="n">crs</span><span class="o">.</span><span class="n">to_epsg</span><span class="p">(</span><span class="n">min_confidence</span><span class="o">=</span><span class="mi">20</span><span class="p">)</span>
<span class="go">2953</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="the-crs-attribute-is-no-longer-a-dict-or-string">
<h3>The <code class="docutils literal notranslate"><span class="pre">.crs</span></code> attribute is no longer a dict or string<a class="headerlink" href="#the-crs-attribute-is-no-longer-a-dict-or-string" title="Permalink to this headline">¶</a></h3>
<p>If you relied on the <code class="docutils literal notranslate"><span class="pre">.crs</span></code> object being a dict or a string, such code can
be broken given it is now a <code class="docutils literal notranslate"><span class="pre">pyproj.CRS</span></code> object. But this object actually
provides a more robust interface to get information about the CRS.</p>
<p>For example, if you used the following code to get the EPSG code:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">gdf</span><span class="o">.</span><span class="n">crs</span><span class="p">[</span><span class="s1">&#39;init&#39;</span><span class="p">]</span>
</pre></div>
</div>
<p>This will no longer work. To get the EPSG code from a <code class="docutils literal notranslate"><span class="pre">crs</span></code> object, you can use
the <code class="docutils literal notranslate"><span class="pre">to_epsg()</span></code> method.</p>
<p>Or to check if a CRS was a certain UTM zone:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="s1">&#39;+proj=utm &#39;</span> <span class="ow">in</span> <span class="n">gdf</span><span class="o">.</span><span class="n">crs</span>
</pre></div>
</div>
<p>could be replaced with the more robust check (requires pyproj 2.6+):</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">gdf</span><span class="o">.</span><span class="n">crs</span><span class="o">.</span><span class="n">utm_zone</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span>
</pre></div>
</div>
<p>And there are many other methods available on the <code class="docutils literal notranslate"><span class="pre">pyproj.CRS</span></code> class to get
information about the CRS.</p>
</div>
</div>
</div>


              </div>
              
              
              <div class='prev-next-bottom'>
                
    <a class='left-prev' id="prev-link" href="mapping.html" title="previous page">Mapping and Plotting Tools</a>
    <a class='right-next' id="next-link" href="geometric_manipulations.html" title="next page">Geometric Manipulations</a>

              </div>
              
          </main>
          

      </div>
    </div>

    
  <script src="../../_static/js/index.d3f166471bb80abb5163.js"></script>


    <footer class="footer mt-5 mt-md-0">
  <div class="container">
    <p>
          &copy; Copyright 2013–2021, GeoPandas developers.<br/>
        Created using <a href="http://sphinx-doc.org/">Sphinx</a> 3.4.3.<br/>
    </p>
  </div>
</footer>
  </body>
</html>