

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Aggregation with dissolve &mdash; GeoPandas 0.7.0 documentation</title>
  

  
  
  
  

  
  <script type="text/javascript" src="_static/js/modernizr.min.js"></script>
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="./" src="_static/documentation_options.js"></script>
        <script src="_static/jquery.js"></script>
        <script src="_static/underscore.js"></script>
        <script src="_static/doctools.js"></script>
        <script src="_static/language_data.js"></script>
    
    <script type="text/javascript" src="_static/js/theme.js"></script>

    

  
  <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="_static/gallery.css" type="text/css" />
  <link rel="stylesheet" href="_static/custom.css" type="text/css" />
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="Merging Data" href="mergingdata.html" />
    <link rel="prev" title="Set-Operations with Overlay" href="set_operations.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="index.html" class="icon icon-home"> GeoPandas
          

          
          </a>

          
            
            
              <div class="version">
                0.7.0
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p class="caption"><span class="caption-text">Getting Started</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="install.html">Installation</a></li>
<li class="toctree-l1"><a class="reference internal" href="gallery/index.html">Examples Gallery</a></li>
</ul>
<p class="caption"><span class="caption-text">User Guide</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="data_structures.html">Data Structures</a></li>
<li class="toctree-l1"><a class="reference internal" href="io.html">Reading and Writing Files</a></li>
<li class="toctree-l1"><a class="reference internal" href="indexing.html">Indexing and Selecting Data</a></li>
<li class="toctree-l1"><a class="reference internal" href="mapping.html">Making Maps</a></li>
<li class="toctree-l1"><a class="reference internal" href="projections.html">Managing Projections</a></li>
<li class="toctree-l1"><a class="reference internal" href="geometric_manipulations.html">Geometric Manipulations</a></li>
<li class="toctree-l1"><a class="reference internal" href="set_operations.html">Set Operations with overlay</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">Aggregation with dissolve</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#dissolve-example"><code class="docutils literal notranslate"><span class="pre">dissolve</span></code> Example</a><ul class="simple">
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#dissolve-arguments">Dissolve Arguments</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="mergingdata.html">Merging Data</a></li>
<li class="toctree-l1"><a class="reference internal" href="geocoding.html">Geocoding</a></li>
<li class="toctree-l1"><a class="reference internal" href="missing_empty.html">Missing and empty geometries</a></li>
</ul>
<p class="caption"><span class="caption-text">Reference Guide</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="reference.html">Reference to All Attributes and Methods</a></li>
</ul>
<p class="caption"><span class="caption-text">Developer</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="contributing.html">Contributing to GeoPandas</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">GeoPandas</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="index.html">Docs</a> &raquo;</li>
        
      <li>Aggregation with dissolve</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="_sources/aggregation_with_dissolve.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="aggregation-with-dissolve">
<h1>Aggregation with dissolve<a class="headerlink" href="#aggregation-with-dissolve" title="Permalink to this headline">¶</a></h1>
<p>Spatial data are often more granular than we need. For example, we might have data on sub-national units, but we’re actually interested in studying patterns at the level of countries.</p>
<p>In a non-spatial setting, when all we need are summary statistics of the data, we aggregate our data using the <code class="docutils literal notranslate"><span class="pre">groupby</span></code> function. But for spatial data, we sometimes also need to aggregate geometric features. In the <em>geopandas</em> library, we can aggregate geometric features using the <code class="docutils literal notranslate"><span class="pre">dissolve</span></code> function.</p>
<p><code class="docutils literal notranslate"><span class="pre">dissolve</span></code> can be thought of as doing three things: (a) it dissolves all the geometries within a given group together into a single geometric feature (using the <code class="docutils literal notranslate"><span class="pre">unary_union</span></code> method), and (b) it aggregates all the rows of data in a group using <code class="docutils literal notranslate"><span class="pre">groupby.aggregate()</span></code>, and (c) it combines those two results.</p>
<div class="section" id="dissolve-example">
<h2><code class="docutils literal notranslate"><span class="pre">dissolve</span></code> Example<a class="headerlink" href="#dissolve-example" title="Permalink to this headline">¶</a></h2>
<p>Suppose we are interested in studying continents, but we only have country-level data like the country dataset included in <em>geopandas</em>. We can easily convert this to a continent-level dataset.</p>
<p>First, let’s look at the most simple case where we just want continent shapes and names. By default, <code class="docutils literal notranslate"><span class="pre">dissolve</span></code> will pass <code class="docutils literal notranslate"><span class="pre">'first'</span></code> to <code class="docutils literal notranslate"><span class="pre">groupby.aggregate</span></code>.</p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [1]: </span><span class="n">world</span> <span class="o">=</span> <span class="n">geopandas</span><span class="o">.</span><span class="n">read_file</span><span class="p">(</span><span class="n">geopandas</span><span class="o">.</span><span class="n">datasets</span><span class="o">.</span><span class="n">get_path</span><span class="p">(</span><span class="s1">&#39;naturalearth_lowres&#39;</span><span class="p">))</span>

<span class="gp">In [2]: </span><span class="n">world</span> <span class="o">=</span> <span class="n">world</span><span class="p">[[</span><span class="s1">&#39;continent&#39;</span><span class="p">,</span> <span class="s1">&#39;geometry&#39;</span><span class="p">]]</span>

<span class="gp">In [3]: </span><span class="n">continents</span> <span class="o">=</span> <span class="n">world</span><span class="o">.</span><span class="n">dissolve</span><span class="p">(</span><span class="n">by</span><span class="o">=</span><span class="s1">&#39;continent&#39;</span><span class="p">)</span>

<span class="gp">In [4]: </span><span class="n">continents</span><span class="o">.</span><span class="n">plot</span><span class="p">();</span>

<span class="gp">In [5]: </span><span class="n">continents</span><span class="o">.</span><span class="n">head</span><span class="p">()</span>
<span class="gh">Out[5]: </span><span class="go"></span>
<span class="go">                                                        geometry</span>
<span class="go">continent                                                       </span>
<span class="go">Africa         MULTIPOLYGON (((32.830 -26.742, 32.580 -27.470...</span>
<span class="go">Antarctica     MULTIPOLYGON (((-163.713 -78.596, -163.713 -78...</span>
<span class="go">Asia           MULTIPOLYGON (((120.295 -10.259, 118.968 -9.55...</span>
<span class="go">Europe         MULTIPOLYGON (((-51.658 4.156, -52.249 3.241, ...</span>
<span class="go">North America  MULTIPOLYGON (((-61.680 10.760, -61.105 10.890...</span>
</pre></div>
</div>
<img alt="_images/continents1.png" src="_images/continents1.png" />
<p>If we are interested in aggregate populations, however, we can pass different functions to the <code class="docutils literal notranslate"><span class="pre">dissolve</span></code> method to aggregate populations using the <code class="docutils literal notranslate"><span class="pre">aggfunc</span> <span class="pre">=</span></code> argument:</p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [6]: </span><span class="n">world</span> <span class="o">=</span> <span class="n">geopandas</span><span class="o">.</span><span class="n">read_file</span><span class="p">(</span><span class="n">geopandas</span><span class="o">.</span><span class="n">datasets</span><span class="o">.</span><span class="n">get_path</span><span class="p">(</span><span class="s1">&#39;naturalearth_lowres&#39;</span><span class="p">))</span>

<span class="gp">In [7]: </span><span class="n">world</span> <span class="o">=</span> <span class="n">world</span><span class="p">[[</span><span class="s1">&#39;continent&#39;</span><span class="p">,</span> <span class="s1">&#39;geometry&#39;</span><span class="p">,</span> <span class="s1">&#39;pop_est&#39;</span><span class="p">]]</span>

<span class="gp">In [8]: </span><span class="n">continents</span> <span class="o">=</span> <span class="n">world</span><span class="o">.</span><span class="n">dissolve</span><span class="p">(</span><span class="n">by</span><span class="o">=</span><span class="s1">&#39;continent&#39;</span><span class="p">,</span> <span class="n">aggfunc</span><span class="o">=</span><span class="s1">&#39;sum&#39;</span><span class="p">)</span>

<span class="gp">In [9]: </span><span class="n">continents</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">column</span> <span class="o">=</span> <span class="s1">&#39;pop_est&#39;</span><span class="p">,</span> <span class="n">scheme</span><span class="o">=</span><span class="s1">&#39;quantiles&#39;</span><span class="p">,</span> <span class="n">cmap</span><span class="o">=</span><span class="s1">&#39;YlOrRd&#39;</span><span class="p">);</span>

<span class="gp">In [10]: </span><span class="n">continents</span><span class="o">.</span><span class="n">head</span><span class="p">()</span>
<span class="gh">Out[10]: </span><span class="go"></span>
<span class="go">                                                        geometry     pop_est</span>
<span class="go">continent                                                                   </span>
<span class="go">Africa         MULTIPOLYGON (((32.830 -26.742, 32.580 -27.470...  1219176238</span>
<span class="go">Antarctica     MULTIPOLYGON (((-163.713 -78.596, -163.713 -78...        4050</span>
<span class="go">Asia           MULTIPOLYGON (((120.295 -10.259, 118.968 -9.55...  4389144868</span>
<span class="go">Europe         MULTIPOLYGON (((-51.658 4.156, -52.249 3.241, ...   746398461</span>
<span class="go">North America  MULTIPOLYGON (((-61.680 10.760, -61.105 10.890...   573042112</span>
</pre></div>
</div>
<img alt="_images/continents2.png" src="_images/continents2.png" />
<div class="toctree-wrapper compound">
</div>
</div>
<div class="section" id="dissolve-arguments">
<h2>Dissolve Arguments<a class="headerlink" href="#dissolve-arguments" title="Permalink to this headline">¶</a></h2>
<p>The <code class="docutils literal notranslate"><span class="pre">aggfunc</span> <span class="pre">=</span></code> argument defaults to ‘first’ which means that the first row of attributes values found in the dissolve routine will be assigned to the resultant dissolved geodataframe.
However it also accepts other summary statistic options as allowed by <code class="docutils literal notranslate"><span class="pre">pandas.groupby()</span></code> including:</p>
<ul class="simple">
<li><p>‘first’</p></li>
<li><p>‘last’</p></li>
<li><p>‘min’</p></li>
<li><p>‘max’</p></li>
<li><p>‘sum’</p></li>
<li><p>‘mean’</p></li>
<li><p>‘median’</p></li>
</ul>
</div>
</div>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="mergingdata.html" class="btn btn-neutral float-right" title="Merging Data" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="set_operations.html" class="btn btn-neutral float-left" title="Set-Operations with Overlay" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2013–2019, GeoPandas developers

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>